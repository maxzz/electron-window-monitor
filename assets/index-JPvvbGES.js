import{p as r,z as l,B as W,C as ye,U as we,D as je,E as B,G as ve,H as Ne,I as Y,J as Ce,K as Se,L as ie,M as Me,N as ke,O as Pe,P as Ae,Q as Ee,R as Re,T as h,o as C,V as d,W as Fe,X as f,Y as ae,Z as Te,_ as Ie,$ as Ge}from"./vendor-BymT7CV9.js";import{R as Le,V as Be,S as Q,T as Z,a as X,b as Oe}from"./vendor-dom-BMf0tbQA.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function a(...t){return t.filter(Boolean).join(" ")}async function He(t){return new Promise((e,n)=>{t.file(e,n)})}async function ee(t){return new Promise((e,n)=>{t.readEntries(e,n)})}async function $e(t){const e=[];let n=await ee(t);for(;n.length>0;)e.push(...n),n=await ee(t);return e}async function De(t){const e=[],n=[];for(let o=0,s=t.length;o<s;o++){const i=t[o],c=i.webkitGetAsEntry();c?n.push(c):console.error("no entry for item",i)}for(;n.length>0;){const o=n.shift();o&&(o.isFile?e.push(o):o.isDirectory&&n.push(...await $e(o.createReader())))}return e}function le(t){var e;return((e=/(?:\.([^./\\]+))?$/.exec(t))==null?void 0:e[1])||""}async function Ue(t){const e=await De(t);let n=[];try{n=await Promise.all(e.map(async o=>({name:o.name,fullPath:o.fullPath,entry:o,file:await He(o)})))}catch{console.error("cannot read from DataTransferItemList",t)}return n}function Je(t){return new Promise((e,n)=>{const o=new FileReader,s=()=>n(`File (${t.name}) reading was aborted`);o.onabort=s,o.onerror=s,o.onload=()=>{var i;return e(((i=o.result)==null?void 0:i.toString())||"")},o.readAsText(t)})}async function ce(t){const e=[];for(const n of t)try{if(!n.file)throw new Error("Empty entry or file");if(n.notOur){e.push({entry:n.entry,file:n.file,name:n.name,fullPath:n.fullPath,cnt:"",failed:!0,notOur:!0});continue}const o=await Je(n.file);e.push({entry:n.entry,file:n.file,name:n.name,fullPath:n.fullPath,cnt:o})}catch(o){e.push({entry:n.entry,file:n.file,name:n.name,fullPath:n.fullPath,cnt:o instanceof Error?o.message:JSON.stringify(o),failed:!0})}return e}async function We(t,e){let n=await Ue(t);return n=e?n.map(o=>e.includes(le(o.name).toLowerCase())?o:{...o,notOur:!0,failed:!0}):n,ce(n)}async function Xe(t){let e=[];try{e=await Promise.all(t.map(async n=>({name:n.name,fullPath:n.webkitRelativePath,entry:void 0,file:n})))}catch{console.error("cannot read from File[]",t)}return e}async function _e(t,e){let n=await Xe(t);return n=e?n.map(o=>e.includes(le(o.name).toLowerCase())?o:{...o,notOur:!0,failed:!0}):n,ce(n)}function ze(t){return[...t].map(n=>n.path).filter(Boolean)}function Ve({defaults:t,loaded:e}){if(!e)return t;const o=Object.entries(t).map(([s,i])=>[s,e[s]!==void 0?e[s]:i]);return Object.fromEntries(o)}function _(t){const e=t instanceof Error?t.message:`${t}`;return e.split(">>>").at(-1)||e}function qe({className:t,...e}){return r.jsx(r.Fragment,{children:r.jsx("div",{className:a("h-0.5 border-b border-primary-500/50",t),...e})})}var P;(t=>{t.allowedExt=["dpm","dpn"]})(P||(P={}));const z=l([]);l(null,async(t,e,n)=>{let o;if(vt()){const s=[...n.files],i=ze(s);if(!i.length)return;o=await Nt(i,P.allowedExt)}else o=await We(n.items,P.allowedExt);o&&e(z,o)});l(null,async(t,e,n)=>{let o=await _e(n,P.allowedExt);o&&e(z,o)});const p=W({buildRunning:!1,buildError:"",buildFailedBody:""}),Ke=ye(p),y=W({buildCounter:0,getPosProgress:null}),O=l(void 0),D=l(null),te=new Map,de=l(null,async(t,e,n)=>{try{if(!n)throw new Error("No hwnd");const o=te.get(n),s=o||await L({type:"r2mi:get-window-icon",hwnd:n});if(s&&s!==o&&te.set(n,s),t(O)!==s){e(O,s);const c=JSON.parse(s||""),m=new Image;m.src=`data:image/png;base64,${c.data}`,e(D,m)}p.buildError=""}catch(o){e(O,""),e(D,null),p.buildError=_(o),console.error(`'doGetWindowIconAtom' ${o instanceof Error?o.message:`${o}`}`)}});function Ye({className:t,title:e,...n}){return r.jsxs("svg",{className:a("fill-none stroke-current stroke-[1.5]",t),viewBox:"0 0 24 24",...n,children:[e&&r.jsx("title",{children:e}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5a3.375 3.375 0 00-3.375-3.375H9.75"})]})}function Qe({className:t,title:e,...n}){return r.jsxs("svg",{className:a("fill-none stroke-current stroke-[1.5]",t),viewBox:"0 0 24 24",...n,children:[e&&r.jsx("title",{children:e}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"})]})}function Ze({className:t,title:e,...n}){return r.jsxs("svg",{className:a("fill-none stroke-current stroke-[1.5]",t),viewBox:"0 0 24 24",...n,children:[e&&r.jsx("title",{children:e}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"})]})}function et({className:t,title:e,...n}){return r.jsxs("svg",{className:a("fill-none stroke-current",t),strokeLinecap:"round",viewBox:"0 0 24 24",...n,children:[e&&r.jsx("title",{children:e}),r.jsx("circle",{cx:"12",cy:"12",r:"8.04"}),r.jsx("circle",{cx:"12",cy:"12",r:"4.99"}),r.jsx("path",{d:"M12 1.5v8.13"}),r.jsx("path",{d:"M22.5 12h-8.13"}),r.jsx("path",{d:"M12 22.5v-8.13"}),r.jsx("path",{d:"M1.5 12h8.13"})]})}function tt(){return r.jsx(we,{children:je()})}const H={edit:Se,psw:Ce,check:Y,radio:Y,list:B,combo:B,text:Ne,button:ve,listbx:B};function nt({field:t,className:e}){var s;const n=t.password?"psw":t.type;return((s=H[n])==null?void 0:s.call(H,{className:e,title:n!=="list"?`Field type: ${n}`:`Field choices: ${t.choosevalue}`}))||r.jsx("div",{className:"text-red-500",children:"nan"})}function rt(t){const e=t.type==="psw";return{type:e?"edit":t.type,password:e,...t.choosevalues.length&&{choosevalue:t.choosevalues.join(",")}}}function ot(t){if(!(t!=null&&t.length))return;const e=t.at(-1);return Me(e==null?void 0:e.roleString)}function st(t){const e=ie.loc.getControlRect(t);if(e)return{left:e[0],top:e[1],right:e[2],bottom:e[3]}}function it(t){var s;const e=t.pool&&((s=t.controls)!=null&&s.length)?t:null;if(!e)return null;const n=ke(e.pool);return{pool:e.pool,controls:at(n,e.controls)}}function at(t,e){return e.map(o=>{const s=ie.fieldPathItems(t,o.path),i=st(s.loc),c=ot(s.p4||s.p4a),m={uuid:Pe.asRelativeNumber(),path:s,...i&&{rect:i},...c&&{role:c}};return{control:o,meta:m}})}function j({progress:t,isRunning:e,error:n,failedBody:o}){y.buildCounter=t,e!==void 0&&(p.buildRunning=e),n!==void 0&&(p.buildError=n),o!==void 0&&(p.buildFailedBody=o)}const N=l(""),I=l(null),lt=l(null,async(t,e,n)=>{try{if(!n)throw new Error("No hwnd");if(p.buildRunning)return;j({progress:0,isRunning:!0,error:"",failedBody:""});const o=await L({type:"r2mi:get-window-controls",hwnd:n});if(t(N)===o){j({progress:0,isRunning:!1,error:""});return}e(N,o);const i=JSON.parse(o||"{}"),c=it(i);e(I,c),e(G,y.buildCounter),j({progress:0,isRunning:!1,error:""}),console.log("doGetWindowControlsAtom.set",JSON.stringify(i,null,4))}catch(o){e(N,""),e(I,null),j({progress:0,isRunning:!1,error:_(o)}),e(G,y.buildCounter),console.error(`'doGetWindowControlsAtom' ${o instanceof Error?o.message:`${o}`}`)}});function ct(t){document.getElementsByTagName("body")[0].classList[t?"add":"remove"]("dark")}function dt(t){ct(t.darkMode)}const ut={maxControls:0,acquireXml:!1,iconAutoUpdate:!0,iconsLarge:!1},mt={screen:"none",app:"none"},ue="electron-window-monitor:ui",me="v2",ft={uiState:{darkMode:!1},monitor:ut,testCreate:mt},u=W(pt());dt(u.uiState);function pt(){var o;let t,e=localStorage.getItem(ue);if(e)try{t=(o=JSON.parse(e))==null?void 0:o[me]}catch{console.error("storageUi bad format")}return Ve({defaults:ft,loaded:t})}Ae(u.uiState,()=>{he(),localStorage.setItem(ue,JSON.stringify({[me]:u}))});const S=l(""),g=l(null),G=l(0),xt=l(null,(t,e)=>{e(g,null),e(S,"")}),fe=l(null,async(t,e)=>{try{const n=await L({type:"r2mi:get-target-hwnd"});if(t(S)===n)return;e(S,n),e(N,void 0),e(I,null);const s=JSON.parse(n||"{}");e(g,s),u.monitor.iconAutoUpdate&&s.hwnd&&e(de,s.hwnd)}catch(n){e(S,""),e(g,null),console.error(`'doGetTargetHwndAtom' ${n instanceof Error?n.message:`${n}`}`)}}),ht=l(t=>{const e=t(g),{buildRunning:n}=t(Ke);return!(e==null?void 0:e.hwnd)||n}),$=l(""),pe=l(void 0),ne=l(null),gt=l(null,async(t,e,{hwnd:n,wantXml:o})=>{var s;try{if(!n)throw new Error("No hwnd");if(p.buildRunning)return;j({progress:0,isRunning:!0,error:"",failedBody:""});const i=await L({type:"r2mi:get-window-mani",hwnd:n,wantXml:o});if(t($)===i){j({progress:0,isRunning:!1,error:""});return}if(e($,i),o)e(pe,i),console.log(`doGetWindowManiXmlAtom.set
${i}`);else{const m=JSON.parse(i||"{}"),v=m.pool&&((s=m.controls)!=null&&s.length)?m:null;e(ne,v),console.log("doGetWindowManiAtom.set",JSON.stringify(m,null,4))}e(G,y.buildCounter),j({progress:0,isRunning:!1,error:""})}catch(i){e($,""),e(ne,null),j({progress:0,isRunning:!1,error:_(i)}),console.error(`'doGetWindowManiAtom' ${i instanceof Error?i.message:`${i}`}`)}});l(t=>{const e=t(pe);return e?bt(e):null});function bt(t){const e=Ee(t);return{mani:e.mani,fcat:e.fcat,meta:Re(e.mani)}}const xe=l(null,(t,e,{hwnd:n,rect:o})=>{if(o){if(n===void 0){const s=t(g);n=s==null?void 0:s.hwnd}n&&V({type:"highlight-rect",hwnd:n,rect:o})}}),k=l(-1),F=l(!1);let w;const A=l(t=>t(F),(t,e,{doStart:n,callback:o})=>{if(t(F))n||(e(F,!1),e(k,-1),w&&(clearTimeout(w),w=void 0));else if(n){let i=function(){o==null||o(),e(k,t(k)+1),w=setTimeout(i,1e3)};e(F,!0),w&&(clearTimeout(w),w=void 0),e(k,1),w=setTimeout(i,1e3)}}),yt=l(null,(t,e,n)=>{switch(n.type){case"dark-mode":{console.log("case dark-mode, active",n.active);break}case"reload-files":{console.log("reload-files");break}case"opened-files":{e(z,n.filesCnt);break}case"detection-progress":{y.buildCounter=n.progress;break}case"position-progress":{y.getPosProgress=n.progress;break}case"failed-raw-content":{p.buildFailedBody=n.body;break}default:{const o=n;throw new Error(`
Unknown IPC-listener: ${JSON.stringify(o)}
`)}}}),U={listeners:new Set,update(t){t&&this.listeners.forEach(e=>e(t))}};function wt(){const t=h(yt);return C.useEffect(()=>{const e=n=>n&&t(n);return U.listeners.add(e),()=>{U.listeners.delete(e)}},[t]),null}function he(){V({type:"set-client-options",state:{maxControls:u.monitor.maxControls}})}function jt(){return C.useEffect(()=>{he()},[]),null}var x=typeof tmApi<"u"?tmApi:void 0;function vt(){return!!x}x==null||x.setCbCallFromMain((t,e)=>U.update(e));function V(t){x==null||x.callMain(t)}async function L(t){return x==null?void 0:x.invokeMain(t)}function Nt(t,e){const n={type:"r2mi:load-files",filenames:t,...e&&{allowedExt:e}};return x==null?void 0:x.invokeMain(n)}function Ct({imageAtom:t,...e}){const n=d(t),o=C.useRef(null);return C.useEffect(()=>{if(!o.current||!n)return;const s=o.current;return s.appendChild(n),()=>{s.removeChild(n)}},[n]),n?r.jsx(r.Fragment,{children:n?r.jsx("div",{ref:o,...e}):null}):null}const re="p-0.5 bg-primary-300/30 hover:bg-primary-500 data-[orientation=vertical]:w-2.5 data-[orientation=horizontal]:h-2.5 data-[orientation=horizontal]:flex-col flex transition-colors duration-[160ms] ease-out select-none touch-none",oe="relative flex-1 bg-primary-700/70 rounded-[10px] before:content-[''] before:absolute before:top-1/2 before:left-1/2 before:-translate-x-1/2 before:-translate-y-1/2 before:w-full before:h-full before:min-w-[44px] before:min-h-[44px]",ge="focus:ring-primary-600 dark:focus:ring-primary-400 focus:ring-offset-primary-200 dark:focus:ring-offset-primary-800 focus:ring-1 focus:ring-offset-1 focus:outline-none",q=a("form-checkbox text-primary-500 bg-primary-400 rounded-sm",ge);function St({children:t}){return r.jsxs(Le,{className:"w-full h-full",type:"always",children:[r.jsx(Be,{className:"pb-4 w-full h-full min-h-0",children:t}),r.jsx(Q,{className:re,orientation:"vertical",children:r.jsx(Z,{className:oe})}),r.jsx(Q,{className:re,orientation:"horizontal",children:r.jsx(Z,{className:oe})})]})}const E="px-2 py-1 text-sm border-primary-500 hover:border-primary-600 hover:bg-primary-500 border rounded shadow active:scale-[.97] disabled:scale-100 disabled:hover:bg-transparent disabled:opacity-20 transition-transform ";function Mt(){const[t,e]=Fe(A),n=h(fe);async function o(){function s(){n()}e({doStart:!t,callback:s})}return r.jsxs("button",{className:a("relative",E),onClick:o,children:[t?r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ze,{className:"w-4 h-4 pt-0.5 fill-red-500 text-red-400"}),"Stop Monitor"]}):r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Qe,{className:"w-4 h-4 pt-0.5"}),"Start Monitor"]}),r.jsx(kt,{className:"absolute -top-3 px-2 leading-6 bg-primary-400 border-primary-600 border rounded"})]})}function kt({className:t,...e}){const n=d(k);return n<0?null:r.jsx("div",{className:a(Pt,t),title:"Number of calls to check the active window",...e,children:`${n}`.padStart(2,"0")})}const Pt="text-center font-mono font-semibold text-transparent [-webkit-text-stroke-width:0.5px] [-webkit-text-stroke-color:#173717]";function At(){const t=h(A),e=h(lt),n=d(g),{buildRunning:o}=f(p),s=n==null?void 0:n.hwnd,i=!s||o,c=s?o?"Build already started":"Get the second active window content":"Get the second active window first";return r.jsx("button",{className:a(E,""),disabled:i,title:c,onClick:()=>{t({doStart:!1}),e(s)},children:"Controls"})}function Et({className:t,...e}){const n=d(A),o=h(fe);return r.jsx("button",{className:a(E,t),disabled:n,onClick:o,...e,children:"Get Second Window"})}function Rt(){const t=h(de),e=d(g),{iconAutoUpdate:n}=f(u.monitor);if(n)return null;const o=e==null?void 0:e.hwnd,s=!o,i=o?"Get the second active window icon":"Get the second active window first";return r.jsx("button",{className:a(E,""),disabled:s,title:i,onClick:()=>{t(o)},children:"Icon"})}function Ft(){const t=h(A),e=h(gt),n=d(g),{buildRunning:o}=f(p),{acquireXml:s}=f(u.monitor),i=n==null?void 0:n.hwnd,c=!i||o,m=i?o?"Build already started":"Get the second active window content":"Get the second active window first";return r.jsx("button",{className:a(E,""),disabled:c,title:m,onClick:()=>{t({doStart:!1}),e({hwnd:i,wantXml:s})},children:"Manifest"})}function Tt({className:t,...e}){return r.jsxs("div",{className:a("grid grid-cols-[auto,auto,1fr,auto] gap-2 select-none",t),...e,children:[r.jsx(Mt,{}),r.jsx(It,{}),r.jsx(Et,{className:"col-start-1 [@media_(min-width:_480px)]:col-start-4"})]})}function It(){const t=d(ht),e=ae({opacity:t?0:1});return r.jsxs(X.div,{style:e,className:a(Gt),children:[r.jsx("div",{className:"absolute left-2.5 -top-2 px-3 text-[.65rem] bg-primary-200 border-primary-500/50 border rounded",children:"Get"}),r.jsxs("div",{className:"flex items-center gap-x-2",children:[r.jsx(At,{}),r.jsx(Rt,{}),r.jsx(Ft,{})]})]})}const Gt="relative px-2 min-h-[66px] border-primary-500/50 border rounded shadow-inner flex items-center ";function Lt(){const t=d(A),e=f(u.monitor).iconsLarge,n=d(S);return n?r.jsxs("div",{className:a("pb-1 max-w-3xl flex items-center justify-between",!e&&"h-7"),children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"text-sm font-semibold",children:"Second active window"}),r.jsx(Ct,{className:e?"size-12":"size-5",imageAtom:D})]}),!t&&r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Bt,{}),r.jsx(Ot,{raw:n})]})]}):null}const be="px-2 py-1 text-xs border-primary-500 border rounded hover:bg-primary-500 select-none shadow-sm";function Bt(){const t=h(xt);return r.jsx("button",{className:a(be,"hover:border-primary-600 hover:shadow active:scale-[.97] transition-transform"),onClick:t,title:"Clear Second Active Window handle",children:"Clear"})}function Ot({raw:t}){try{const e=JSON.parse(t);t=JSON.stringify(e,null,2)}catch{t=`Failed to parse: "${t}"`}return t=`Second active window info:
${t}`,r.jsxs("div",{className:"relative group cursor-default",children:[r.jsx("div",{className:be,children:"Raw"}),r.jsx("div",{className:"absolute hidden group-hover:block right-0 py-1",children:r.jsx("div",{className:"relative px-2 py-1 text-xs bg-primary-100 rounded whitespace-pre z-50",children:`${t}`})})]})}function Ht(){const t=d(g),e=d(G);return r.jsx(r.Fragment,{children:t&&r.jsxs("div",{className:"relative text-xs",children:[r.jsxs("div",{className:"border-primary-500 border rounded grid grid-cols-[auto_1fr]",children:[r.jsx(T,{name:"caption",value:t.caption,className:"font-semibold",highlight:!0}),r.jsx(T,{name:"classname",value:t.classname}),r.jsx(T,{name:"process",value:t.process}),r.jsx(T,{name:"hwnd",value:((t==null?void 0:t.hwnd)||"").replace(/^00000000/,"")})]}),!!e&&r.jsxs("div",{className:"text-[.55rem] opacity-70 absolute right-2 bottom-1.5",children:["last progress calls: ",e]})]})})}function T({name:t,value:e,className:n,highlight:o}){return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"px-2 py-1.5 h-full border-primary-500 border-b text-xs ",children:t}),r.jsx("div",{className:a("py-1.5 border-primary-500 border-l border-b px-2",n,o&&e&&"bg-primary-300/30"),children:e})]})}function $t(t){const{buildError:e}=f(p);return r.jsx(r.Fragment,{children:e?r.jsx(Dt,{buildError:e,...t}):r.jsx(Ut,{...t})})}function Dt({buildError:t,className:e,...n}){return r.jsx("div",{className:a("my-2 px-2 text-[.65rem] text-white bg-red-600 rounded-sm flex items-center gap-x-1",e),...n,children:t})}function Ut({className:t,...e}){const{buildCounter:n}=f(y);return n<200?null:r.jsxs("div",{className:a("my-2 text-xs text-primary-700 flex items-center gap-x-1",t),...e,children:[r.jsx("div",{children:"controls detection progress"}),r.jsx("div",{className:"pt-0.5 min-w-[2.5rem] font-semibold font-mono",children:n}),r.jsx("button",{className:Jt,onClick:()=>V({type:"cancel-detection"}),children:"Cancel"})]})}const Jt="px-2 py-1 text-orange-100 bg-orange-500 border-orange-600 hover:text-white hover:bg-orange-600 hover:border-orange-700 border rounded shadow disabled:scale-100 disabled:hover:bg-transparent disabled:opacity-20 active:scale-x-75 transition-colors ";function Wt({className:t,...e}){return r.jsxs("div",{className:a("grid",t),...e,children:[r.jsx(Lt,{}),r.jsx(Ht,{}),r.jsx($t,{className:"place-self-end"})]})}function Xt(){const[t,e]=C.useState(!1),n=d(N),{buildFailedBody:o}=f(p),s=o||n;return s?r.jsxs("button",{className:a(_t,"relative p-1.5 py-1 active:scale-[.97]"),title:"copy server reply",onClick:()=>{navigator.clipboard.writeText(s),e(!0)},children:[r.jsx(Ye,{className:"w-4 h-4 text-primary-800/80"}),r.jsx(zt,{show:t,setShow:e,items:["",r.jsx("div",{className:"absolute -left-5 -top-[50px] px-2 py-1 w-fit text-xs text-white bg-primary-600 border-primary-800 border rounded",children:"Copied"})]})]}):null}const _t="border-primary-500 border rounded hover:bg-primary-500 hover:border-primary-600 select-none shadow-sm";function zt({show:t,setShow:e,items:n}){return Te(Number(t),{from:{opacity:0,y:0},enter:{opacity:1,y:0,config:{duration:300}},leave:{opacity:0,y:-25,config:{duration:350,easing:Ie.easeOutQuad}},onRest:({finished:s})=>t&&s&&(e==null?void 0:e(!1))})((s,i)=>r.jsxs(X.div,{style:s,className:"absolute",children:[" ",n[i]," "]}))}function Vt(){return r.jsx("div",{className:"flex items-center justify-between gap-2",children:r.jsx(qt,{})})}function qt(){const t=d(N),{buildCounter:e}=f(y),{buildError:n}=f(p),o=!!t||e>0||!!n;return r.jsx(r.Fragment,{children:o&&r.jsxs("div",{className:"py-1 flex items-center gap-2",children:[r.jsx("div",{className:"text-sm font-semibold",children:"Controls inside window"}),r.jsx(Xt,{})]})})}function Kt({controls:t}){return console.log("controls",t),r.jsx("div",{className:"text-xs grid",children:t.map((e,n)=>r.jsx(Yt,{item:e},n))})}function Yt({item:t}){var v,R,b,M,K;const[e,n]=C.useState(!1),o=h(xe);function s(){o({rect:t.meta.rect}),n(!0)}const i=ae({borderColor:e?"red":"transparent",borderStyle:"solid",borderWidth:"1px",onRest:()=>{n(!1)}}),c=((v=t.meta.role)==null?void 0:v.role)||((R=t.meta.role)==null?void 0:R.raw),m=(b=t.meta.role)!=null&&b.states?`${(M=t.meta.role)==null?void 0:M.states.join(", ")}`:"";return r.jsxs(X.div,{style:i,className:Zt,onClick:s,children:[r.jsx("div",{className:"text-end",title:"Order ID",children:`${t.control.orderid}`.padStart(2,"0")}),r.jsx("div",{children:r.jsx(nt,{className:"size-4",field:rt(t.control)})}),r.jsx("div",{className:en,children:t.control.dispname}),r.jsxs("div",{className:"pr-4 text-[.6rem] flex items-center justify-between",title:(K=t.meta.role)==null?void 0:K.raw,children:[r.jsx("div",{className:"font-semibold",children:c}),r.jsx("div",{children:m})]})]})}const Qt="[&>*]:pl-2 [&>*]:py-0.5 [&>*]:border-primary-500 [&>*]:border-l",Zt=a("grid grid-cols-[1.6rem,1.6rem,minmax(10ch,30ch),16rem] gap-x-2 cursor-pointer",Qt),en="whitespace-nowrap overflow-hidden overflow-ellipsis";function tn(){const t=d(N),e=d(I),n=e==null?void 0:e.controls;return n?r.jsx("div",{className:a("min-h-32",nn),children:r.jsx(St,{children:r.jsx(Kt,{controls:n})})}):t?r.jsx("div",{className:"text-sm",children:"No controls detected"}):null}const nn="text-xs border-primary-500 border rounded select-none shadow-sm";function rn({className:t,...e}){return d(S)?r.jsxs("div",{className:a("min-h-0 flex flex-col",t),...e,children:[r.jsx(Vt,{}),r.jsx(tn,{})]}):null}function on({className:t,...e}){return r.jsxs("div",{className:a("min-h-0 text-primary-900 flex flex-col gap-4 divide-y-1 divide-sky-500/50",t),...e,children:[r.jsx(Tt,{className:"py-4 1border-b border-primary-500/50"}),r.jsx(Wt,{className:"border-b 1border-primary-500/50"}),r.jsx(rn,{className:"border-b 1border-primary-500/50"})]})}function sn({className:t,...e}){const[n,o]=C.useState(!0),{getPosProgress:s}=f(y),i=d(g);if(!(i!=null&&i.hwnd))return null;function c(b){b.target.setPointerCapture(b.pointerId),o(!1)}function m(b){o(!0)}function v(b){if(n)return;const M={x:se(b.pageX),y:se(b.pageY)};y.getPosProgress={point:M}}function R(b){o(!0)}return r.jsxs("div",{className:a("flex items-end space-x-2",t),...e,children:[r.jsx("div",{children:"Test get target position:"}),r.jsx("div",{className:"w-12 h-12 bg-primary-900 rounded cursor-pointer",onPointerDown:c,onPointerUp:m,onPointerMove:v,onPointerCancel:R,children:r.jsx(et,{className:a("text-primary-200",!n&&"invisible")})}),s&&r.jsxs("div",{children:[s.point.x,", ",s.point.y]})]})}function se(t){return Math.round(t)}function an({className:t,...e}){return r.jsxs("div",{className:a("text-primary-600 flex items-center justify-between",t),...e,children:[r.jsxs("div",{className:"flex items-center gap-x-1",children:[r.jsx("div",{children:"Test web logins:"}),r.jsx("a",{className:J,href:"https://tailwindui.com/login",target:"_blank",children:"tw"}),r.jsx("a",{className:J,href:"https://www.bankofamerica.com",target:"_blank",children:"bofa"})]}),r.jsx(ln,{})]})}function ln(){const t=d(g),e=h(xe);return t!=null&&t.hwnd?r.jsx("button",{className:J,onClick:()=>{e({hwnd:t.hwnd,rect:{left:0,top:0,right:640,bottom:480}})},children:"Highlight"}):null}const J="px-2 py-0.5 hover:text-green-100 hover:bg-primary-600 border-primary-600 border border-dotted rounded active:scale-x-[.97]";function cn(){const{maxControls:t}=f(u.monitor);function e(n){let o=parseInt(n);Number.isNaN(o)&&(o=0),u.monitor.maxControls=o}return r.jsxs("label",{className:"w-max flex items-center gap-x-2",title:"Allowed number of controls before rejecting content detection (0 - unlimited).",children:[r.jsx("div",{className:"select-none",children:"Max controls"}),r.jsx("input",{className:a("px-2 py-1 w-20 text-primary-900 bg-primary-300 rounded-sm",ge),value:t,onChange:n=>e(n.target.value)})]})}function dn(){const{acquireXml:t}=f(u.monitor);return r.jsxs("label",{className:"w-max flex items-center gap-x-1",title:"The get manifest request format: JSON/XML",children:[r.jsx("input",{type:"checkbox",className:q,checked:t,onChange:e=>u.monitor.acquireXml=e.target.checked}),r.jsx("div",{className:"select-none",children:"Get manifest in XML format"})]})}function un(){const{iconAutoUpdate:t}=f(u.monitor);return r.jsxs("label",{className:"w-max flex items-center gap-x-1",title:"The get manifest request format: JSON/XML",children:[r.jsx("input",{type:"checkbox",className:q,checked:t,onChange:e=>u.monitor.iconAutoUpdate=e.target.checked}),r.jsx("div",{className:"select-none",children:"Auto update icon"})]})}function mn(){const{iconsLarge:t}=f(u.monitor);return r.jsxs("label",{className:"w-max flex items-center gap-x-1",title:"The get manifest request format: JSON/XML",children:[r.jsx("input",{type:"checkbox",className:q,checked:t,onChange:e=>u.monitor.iconsLarge=e.target.checked}),r.jsx("div",{className:"select-none",children:"Large icon"})]})}function fn({className:t,...e}){return r.jsxs("div",{className:a("text-xs border border-slate-500/50 rounded flex flex-col select-none",t),...e,children:[r.jsx(an,{className:"p-2 border-b border-slate-500/50"}),r.jsx(sn,{className:"p-2 border-b border-slate-500/50"}),r.jsxs("div",{className:"p-2 flex gap-x-4",children:[r.jsx(cn,{}),r.jsx(dn,{}),r.jsx(un,{}),r.jsx(mn,{})]})]})}function pn(){return r.jsxs("div",{className:"h-screen bg-primary-100 grid grid-rows-[auto_1fr]",children:[r.jsx(qe,{className:""}),r.jsxs("div",{className:"py-4 h-full min-h-0 grid grid-rows-[1fr_auto] gap-4",children:[r.jsx(on,{className:"mx-4 max-w-2xl"}),r.jsx(fn,{className:"mx-4 max-w-2xl"})]})]})}function xn(){return r.jsxs(r.Fragment,{children:[r.jsx(tt,{}),r.jsx(pn,{}),r.jsx(wt,{}),r.jsx(jt,{})]})}Oe.createRoot(document.getElementById("root")).render(r.jsx(Ge.StrictMode,{children:r.jsx(xn,{})}));postMessage({payload:"removeLoading"},"*");
